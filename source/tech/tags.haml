---
title: Tags
---
%section.tags
  #tag_cloud
  - blog.tags.each do |tag, articles|
    %div{:id => "tag-#{tag}" }
      %h3
        = tag
      %ul.listing
        - articles.reverse_each do |article|
          %li.listing-item
            %time{:datetime => article.date}=article.date.strftime('%Y-%m-%d')
            %a{:href => article.url}=article.title
            -# %div
            -#   %backquote
            -#     = article.summary
- content_for :head do
  = stylesheet_link_tag "jqcloud.css"
- content_for :scripts do
  = javascript_include_tag "jqcloud-1.0.1.js"
  :javascript
    $(function() {
      $.getJSON('tags.json', function(tag_array, statusText) {
        $("#tag_cloud").jQCloud(tag_array, {
          width: Math.min(60 * tag_array.length, 400),
          height: Math.min(30 * tag_array.length, 250),
          //shape: 'rectangular',
          afterCloudRender: function() {
            $('a', this).click(function() {
              var show_tag_id = $(this).attr('href').toString().substring(1);
              $('[id^=tag-]').each(function(i, e) {
                console.log(encodeURI($(e).attr('id').toString()), show_tag_id);
                if(encodeURI($(e).attr('id').toString()) != show_tag_id)
                {
                  $(e).hide();
                }
                else
                {
                  $(e).show();
                }
              });
            });
          }
        });
      });
    });
