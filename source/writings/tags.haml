---
title: Tags
---
-# coding: utf-8
%section.tags
  #tag_cloud
  - tags_of('writings', true).sort_by{|tag, articles| -articles.size }.each do |tag_and_articles|
    - tag = tag_and_articles[0]
    - articles = tag_and_articles[1]
    - if articles.size > 1
      %div{:id => "tag-#{tag}" }
        %h3
          = tag
        %ul.listing
          - articles.sort_by { |a| date_of(a) }.reverse.each do |article|
            %li.listing-item
              %time{:datetime => date_of(article)}=date_of(article).strftime('%Y-%m-%d %H:%M')
              %a{:href => article.url}=article.data['title']
- content_for :head do
  = stylesheet_link_tag "jqcloud.css"
- content_for :scripts do
  = javascript_include_tag "jqcloud-1.0.1.js"
  :javascript
    $(function() {
      $.getJSON('tags.json', function(tag_array, statusText) {
        $("#tag_cloud").jQCloud(tag_array, {
          width: Math.min(60 * tag_array.length, 400),
          height: Math.min(30 * tag_array.length, 250),
          //shape: 'rectangular',
          afterCloudRender: function() {
            $('a', this).click(function() {
              var show_tag_id = $(this).attr('href').toString().substring(1);
              $('[id^=tag-]').each(function(i, e) {
                console.log(encodeURI($(e).attr('id').toString()), show_tag_id);
                if(encodeURI($(e).attr('id').toString()) != show_tag_id)
                {
                  $(e).hide();
                }
                else
                {
                  $(e).show();
                }
              });
            });
          }
        });
      });
    });
