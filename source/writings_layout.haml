- wrap_layout :blog_layout do
  - content_for :nav do
    - @blog_name = "writings"
    %span
      %a{:href => "/#{@blog_name}/"} home
    %span
      %a{:href => "/#{@blog_name}/calendar.html"} calendar
    %span
      %a{:href => "/#{@blog_name}/tags.html"} tags
  - content_for :header do
    - if is_blog?(current_page)
      %div.article_nav
        %span.later
          - if next_ = next_of(current_page)
            %a{:href => next_.url}
              < 更新
          - else
            〇 已是最新
        %span.earlier
          - if prev_ = prev_of(current_page)
            %a{:href => prev_.url}
              更早 >
          - else
            已是最早 〇
  - content_for :footer do
    - if is_blog?(current_page)
      %section.meta
        %p
          %span.author
            %a{:href => "/"} 宋皿
          %span.time
            %time{:datetime => date_of(current_page)}
              = date_of(current_page).strftime('%Y-%m-%d %H:%M')
        %p
          %span.license
            Published under
            %a{:href => "http://creativecommons.org/licenses/by-nc-nd/3.0/", :rel => "license"} (CC) BY-NC-ND
          - 
          - if tags = current_page.data['tags'].split(',').keep_if { |t| (tags_of('writings')[t.strip] || []).size > 1 }
            %span.tags
              - if tags.size > 0
                tagged with
              - tags.each do |tag|
                %a{:href => "/#{@blog_name}/tags.html#tag-#{tag.strip}"}
                  = tag
      #disqus_thread
      :javascript
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'utensil-at-github'; // required: replace example with your forum shortname
        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
      %a.dsq-brlink{:href => "http://disqus.com"}
        comments powered by
        %span.logo-disqus Disqus
  = yield