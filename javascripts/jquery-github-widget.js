/*!
 * jQuery Github Widgets
 *
 * Copyright 2012, Utensil Song
 * https://github.com/utensil
 * 
 * Released under the MIT licenses.
 * 
 */
(function(e){var t={createCaption:function(t){var n=t,r="https://www.github.com/"+n.login,i=r+"/repositories",s=r+"/followers",o=e("div.github-widget"),u=e('<div class="github-widget-caption"/>'),a=e('<div class="github-widget-stat"/>'),f=e('<span class="github-widget-avatar" />'),l=e("<a />").attr("href",r),c=e("<img />");c.attr("title",n.login),c.attr("alt",n.login),c.attr("src",n.avatar_url),l.append(c);var h=e('<span class="github-widget-repos-count" />'),p=e("<a />").attr("href",i),d=e("<strong />").text(n.public_repos),v=e("<span> public repos</span>"),m=e('<span class="github-widget-followers-count" />'),g=e("<a />").attr("href",s),y=e("<strong />").text(n.followers),b=e("<span> followers</span>");p.append(d).append(v),g.append(y).append(b),o.append(u.append(a.append(f.append(l)).append(h.append(p)).append(m.append(g))))},createReposList:function(t){var n=t;n=n.reverse();var r=e("div.github-widget"),i=e('<ul class="github-widget-repos-list"/>');for(var s in n){var o=n[s],u=e("<li />"),a=e("<a />").text(o.name).attr("href",o.html_url),f=e("<h3 />").append(a);o.fork&&f.addClass("fork-flag");var l=e('<ul class="repo-stats" />'),c=e('<li class="language"/>').text(o.language||""),h=e('<a class="watchers" />').text(o.watchers).attr("href",o.html_url+"/watchers"),p=e("<li />").append(h),d=e('<a class="forks" />').text(o.forks).attr("href",o.html_url+"/network"),v=e("<li />").append(d);l.append(c).append(p).append(v);var m=e('<div class="body" />'),g=e('<p class="description" />').text(o.description),y=e('<p class="updated-at" />').text("Last updated: "+o.updated_at.replace("T"," ").replace("Z"," "));m.append(g).append(y),u.append(l).append(f).append(m),i.append(u)}r.append(i)}};e.fn.github_widget=function(n){var r={width:"95%","max-width":"450px",align:"center"},n=e.extend(r,n),i=e("<div></div>").addClass("github-widget");return i.css({width:n.width,"max-width":n["max-width"],"margin-left":n["align"]=="left"?"5px":"auto","margin-right":n["align"]=="right"?"5px":"auto"}),this.append(i),e.ajax("https://api.github.com/users/"+n.user,{type:"get",dataType:"jsonp",crossDomain:!0,success:function(r){t.createCaption(r.data),e.ajax("https://api.github.com/users/"+n.user+"/repos",{type:"get",dataType:"jsonp",crossDomain:!0,success:function(e){t.createReposList(e.data)}})}}),this}})(jQuery);